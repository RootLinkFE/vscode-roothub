(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){e.exports=n(47)},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var i,a=n(0),r=n(14),o=n(2),s=n.n(o),c=n(7),u=n(6),l=n(4),h=n(5),d=n(1),p=n(8),v=n(9),f=n(3),g=(n(26),n(27),n(18));function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}!function(e){e.Cut="Cut",e.Copy="Copy",e.Paste="Paste",e.PasteAndGo="Paste & Go",e.Delete="Delete",e.SelectAll="Select All",e.Seperator="-"}(i||(i={}));var b=function(e){Object(p.a)(n,e);var t=m(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).state={itemType:i.props.itemType,isDisabled:i.props.isDisabled||!1},i.handleClick=i.handleClick.bind(Object(d.a)(i)),i}return Object(h.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.isDisabled!==this.state.isDisabled&&this.setState({isDisabled:e.isDisabled})}},{key:"handleClick",value:function(e){this.props.handleClick(e),this.props.setVisibility(!1)}},{key:"render",value:function(){var e=["contextMenuItem"];return this.state.isDisabled&&e.push("disabled"),this.state.itemType===i.Seperator&&(e.push("disabled"),e.push("separator")),this.state.itemType===i.Seperator?a.createElement("li",{className:e.join(" ")}):a.createElement("li",{className:e.join(" "),onClick:this.handleClick},this.state.itemType)}}]),n}(a.Component);function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}var y=function(e){Object(p.a)(n,e);var t=w(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).ref=void 0,a.state={isVisible:!1,position:{x:0,y:0},menuItems:[{itemType:i.Cut,setVisibility:a.props.setVisibility,handleClick:function(e){return a.CutHandler(e)}},{itemType:i.Copy,setVisibility:a.props.setVisibility,handleClick:function(e){return a.CopyHandler(e)}},{itemType:i.Paste,setVisibility:a.props.setVisibility,handleClick:function(e){return a.PasteHandler(e)}},{itemType:i.PasteAndGo,setVisibility:a.props.setVisibility,handleClick:function(e){return a.PasteGoHandler(e)}},{itemType:i.Delete,setVisibility:a.props.setVisibility,handleClick:function(e){return a.DeleteHandler(e)}},{itemType:i.Seperator,setVisibility:a.props.setVisibility,handleClick:function(){}},{itemType:i.SelectAll,setVisibility:a.props.setVisibility,handleClick:function(e){return a.SelectAllHandler(e)}}]},a.setRef=a.setRef.bind(Object(d.a)(a)),a.handleClickOutside=a.handleClickOutside.bind(Object(d.a)(a)),a}return Object(h.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.position.x===this.state.position.x&&e.position.y===this.state.position.y||this.setState({position:e.position}),e.isVisible!==this.state.isVisible&&(this.setState({isVisible:e.isVisible}),this.manageMenuItemsStatus())}},{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"manageMenuItemsStatus",value:function(){var e=Object(c.a)(s.a.mark(function e(){var t,n,a,r,o,c,u,l,h,d,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(g.a)(this.state.menuItems),n=this.state.menuItems.find(function(e){return e.itemType===i.Cut}),a=this.state.menuItems.findIndex(function(e){return e.itemType===i.Cut}),r=this.state.menuItems.find(function(e){return e.itemType===i.Copy}),o=this.state.menuItems.findIndex(function(e){return e.itemType===i.Copy}),c=this.state.menuItems.find(function(e){return e.itemType===i.Delete}),u=this.state.menuItems.findIndex(function(e){return e.itemType===i.Delete}),window.getSelection().toString().length>0?(n&&(t[a].isDisabled=!1,this.setState({menuItems:t})),r&&(t[o].isDisabled=!1,this.setState({menuItems:t})),c&&(t[u].isDisabled=!1,this.setState({menuItems:t}))):(n&&(t[a].isDisabled=!0,this.setState({menuItems:t})),r&&(t[o].isDisabled=!0,this.setState({menuItems:t})),c&&(t[u].isDisabled=!0,this.setState({menuItems:t}))),l=this.state.menuItems.find(function(e){return e.itemType===i.Paste}),h=this.state.menuItems.findIndex(function(e){return e.itemType===i.Paste}),d=this.state.menuItems.find(function(e){return e.itemType===i.PasteAndGo}),p=this.state.menuItems.findIndex(function(e){return e.itemType===i.PasteAndGo}),e.t0=this.props.onActionInvoked,!e.t0){e.next=17;break}return e.next=16,this.props.onActionInvoked("readClipboard");case 16:e.t0=e.sent;case 17:if(!e.t0){e.next=22;break}l&&(t[h].isDisabled=!1,this.setState({menuItems:t})),d&&(t[p].isDisabled=!1,this.setState({menuItems:t})),e.next=24;break;case 22:l&&(t[h].isDisabled=!0,this.setState({menuItems:t})),d&&(t[p].isDisabled=!0,this.setState({menuItems:t}));case 24:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=["contextMenu"];this.state.isVisible||e.push("hidden");var t={left:this.state.position.x,top:this.state.position.y};return a.createElement("ul",{className:e.join(" "),style:t,ref:this.setRef},this.state.menuItems.map(function(e,t){return a.createElement(b,Object.assign({},e,{key:t}))}))}},{key:"setRef",value:function(e){this.ref=e}},{key:"handleClickOutside",value:function(e){this.ref&&!this.ref.contains(e.target)&&this.props.setVisibility(!1)}},{key:"CutHandler",value:function(){var e=Object(c.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.onActionInvoked||!this.props.selectedUrlInput){e.next=4;break}return e.next=3,this.props.onActionInvoked("writeClipboard",{value:this.props.selectedUrlInput});case 3:this.props.setUrl("");case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"CopyHandler",value:function(){var e=Object(c.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.onActionInvoked||!this.props.selectedUrlInput){e.next=3;break}return e.next=3,this.props.onActionInvoked("writeClipboard",{value:this.props.selectedUrlInput});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"PasteHandler",value:function(){var e=Object(c.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.onActionInvoked){e.next=5;break}return e.next=3,this.props.onActionInvoked("readClipboard");case 3:(n=e.sent)&&this.props.setUrl(n);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"PasteGoHandler",value:function(){var e=Object(c.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.onActionInvoked||!this.props.enterUrl){e.next=5;break}return e.next=3,this.props.onActionInvoked("readClipboard");case 3:(n=e.sent)&&(this.props.setUrl(n),this.props.enterUrl());case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"DeleteHandler",value:function(){var e=Object(c.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.selectedUrlInput&&this.props.setUrl("");case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"SelectAllHandler",value:function(){var e=Object(c.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.selectUrl&&this.props.selectUrl();case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),n}(a.Component);n(28);function M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}var I=function(e){Object(p.a)(n,e);var t=M(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).ref=void 0,i.state={hasChanged:!1,isFocused:!1,url:i.props.url,urlSelectionStart:0,urlSelectionEnd:0,contextMenuProps:{menuItems:[],isVisible:!1,position:{x:0,y:0},setVisibility:i.setVisibility.bind(Object(d.a)(i)),setUrl:i.setUrl.bind(Object(d.a)(i)),enterUrl:i.enterUrl.bind(Object(d.a)(i)),selectUrl:i.selectUrl.bind(Object(d.a)(i)),onActionInvoked:i.props.onActionInvoked,selectedUrlInput:""}},i.handleChange=i.handleChange.bind(Object(d.a)(i)),i.handleFocus=i.handleFocus.bind(Object(d.a)(i)),i.handleBlur=i.handleBlur.bind(Object(d.a)(i)),i.handleKeyDown=i.handleKeyDown.bind(Object(d.a)(i)),i.handleContextMenu=i.handleContextMenu.bind(Object(d.a)(i)),i.setRef=i.setRef.bind(Object(d.a)(i)),i}return Object(h.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.url===this.state.url||this.state.hasChanged||this.setState({url:e.url})}},{key:"setVisibility",value:function(e){this.setState({contextMenuProps:Object(u.a)({},this.state.contextMenuProps,{isVisible:e})})}},{key:"setUrl",value:function(e){var t=null;if(this.state.urlSelectionStart&&this.state.urlSelectionEnd){var n=this.state.url,i=n.slice(0,this.state.urlSelectionStart),a=n.slice(this.state.urlSelectionEnd);t=(i+e).length,e=i+e+a}else if(this.state.urlSelectionStart){var r=this.state.url,o=r.slice(0,this.state.urlSelectionStart),s=r.slice(this.state.urlSelectionStart);t=(o+e).length,e=o+e+s}e!==this.state.url&&(this.setState({url:e,hasChanged:!0,isFocused:!0}),this.ref&&t&&(this.ref.focus(),this.ref.setSelectionRange(t,t)))}},{key:"render",value:function(){var e=["urlbar"];return this.state.isFocused&&e.push("focused"),a.createElement("div",{className:e.join(" ")},a.createElement("input",{type:"text",ref:this.setRef,value:this.state.url,onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onContextMenu:this.handleContextMenu}),a.createElement(y,this.state.contextMenuProps))}},{key:"setRef",value:function(e){this.ref=e}},{key:"handleChange",value:function(e){this.setState({url:e.target.value,hasChanged:!0})}},{key:"handleFocus",value:function(e){this.selectUrl(e.target)}},{key:"selectUrl",value:function(e){!e&&this.ref&&(e=this.ref),e&&(e.select(),this.setState({isFocused:!0}))}},{key:"handleBlur",value:function(e){this.setState({isFocused:!1})}},{key:"handleContextMenu",value:function(e){e.preventDefault(),this.setState({urlSelectionStart:e.currentTarget.selectionStart,urlSelectionEnd:e.currentTarget.selectionEnd,contextMenuProps:Object(u.a)({},this.state.contextMenuProps,{isVisible:!0,position:{x:e.clientX,y:e.clientY},selectedUrlInput:this.state.isFocused?window.getSelection().toString():""})})}},{key:"enterUrl",value:function(){var e=this.state.url;e.match(/^(https?|about|chrome|file):/)||(e="http://"+this.state.url),this.setState({hasChanged:!1}),this.props.onUrlChanged(e)}},{key:"handleKeyDown",value:function(e){13===e.keyCode&&this.enterUrl()}}]),n}(a.Component);n(29);function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}var C=n(30),j=function(e){Object(p.a)(n,e);var t=k(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).emulatedDevices=void 0,i.viewportMetadata=void 0,i.handleWidthChange=i.handleWidthChange.bind(Object(d.a)(i)),i.handleHeightChange=i.handleHeightChange.bind(Object(d.a)(i)),i.handleDeviceChange=i.handleDeviceChange.bind(Object(d.a)(i)),i.emulatedDevices=[{name:"Responsive",userAgent:"",viewport:[]},{name:"Macbook 15",userAgent:"",viewport:{width:1440,height:900}},{name:"Macbook 13",userAgent:"",viewport:{width:1280,height:800}}].concat(C).filter(function(e){return!e.viewport.isLandscape}),i}return Object(h.a)(n,[{key:"render",value:function(){this.viewportMetadata=this.props.viewportMetadata;var e=this.viewportMetadata.emulatedDeviceId||"",t=Math.round(100*this.viewportMetadata.screenZoom),n=[{label:"Fit (".concat(t,"%)"),value:"fit"}],i=0|this.viewportMetadata.height,r=0|this.viewportMetadata.width;return console.log(this.viewportMetadata,e),a.createElement("div",{className:"device-settings "+(this.props.isVisible?"active":"")},a.createElement("select",{className:"device-selector",onChange:this.handleDeviceChange,value:e},this.emulatedDevices.map(function(e){return a.createElement("option",{key:e.name,value:e.name,selected:e.selected},e.name)})),a.createElement("span",{className:"metadata"},a.createElement("input",{className:"viewport-size-input",type:"number",min:"0",value:r,onChange:this.handleWidthChange}),a.createElement("span",{className:"spacer"},"\ud835\uddd1"),a.createElement("input",{className:"viewport-size-input",type:"number",min:"0",value:i,onChange:this.handleHeightChange})),a.createElement("select",{className:"zoom-selector",value:"fit",onChange:this.handleZoomChange},n.map(function(e){return a.createElement("option",{key:e.value,value:e.value},e.label)})))}},{key:"handleDeviceChange",value:function(e){var t=e.target.value,n=this.emulatedDevices.find(function(e){return e.name==t});this.props.onDeviceChange(n)}},{key:"handleHeightChange",value:function(e){var t=parseInt(e.target.value);this.props.onViewportSizeChange({height:t,width:this.props.width})}},{key:"handleWidthChange",value:function(e){var t=parseInt(e.target.value);this.props.onViewportSizeChange({width:t,height:this.props.height})}},{key:"handleZoomChange",value:function(e){console.log("not implemented")}}]),n}(a.Component);function D(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}var x={backgroundImage:"url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBkPSJNNDI3IDIzNC42MjVIMTY3LjI5NmwxMTkuNzAyLTExOS43MDJMMjU2IDg1IDg1IDI1NmwxNzEgMTcxIDI5LjkyMi0yOS45MjQtMTE4LjYyNi0xMTkuNzAxSDQyN3YtNDIuNzV6Ii8+PC9zdmc+)"},N={backgroundImage:"url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBkPSJNODUgMjc3LjM3NWgyNTkuNzA0TDIyNS4wMDIgMzk3LjA3NyAyNTYgNDI3bDE3MS0xNzFMMjU2IDg1bC0yOS45MjIgMjkuOTI0IDExOC42MjYgMTE5LjcwMUg4NXY0Mi43NXoiLz48L3N2Zz4=)"},S={backgroundImage:"url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBkPSJNMjU2IDM4OGMtNzIuNTk3IDAtMTMyLTU5LjQwNS0xMzItMTMyIDAtNzIuNjAxIDU5LjQwMy0xMzIgMTMyLTEzMiAzNi4zIDAgNjkuMjk5IDE1LjQgOTIuNDA2IDM5LjYwMUwyNzggMjM0aDE1NFY4MGwtNTEuNjk4IDUxLjcwMkMzNDguNDA2IDk5Ljc5OCAzMDQuNDA2IDgwIDI1NiA4MGMtOTYuNzk3IDAtMTc2IDc5LjIwMy0xNzYgMTc2czc4LjA5NCAxNzYgMTc2IDE3NmM4MS4wNDUgMCAxNDguMjg3LTU0LjEzNCAxNjkuNDAxLTEyOEgzNzguODVjLTE4Ljc0NSA0OS41NjEtNjcuMTM4IDg0LTEyMi44NSA4NHoiLz48L3N2Zz4=)"},O={backgroundImage:"url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxNjBweCIgaGVpZ2h0PSIxNjBweCIgdmlld0JveD0iMCAwIDE2MCAxNjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+ICAgICAgICA8dGl0bGU+aW5zcGVjdDwvdGl0bGU+ICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4gICAgICAgIDxnIGlkPSJpbnNwZWN0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjQuMDAwMDAwLCAtMjQuMDAwMDAwKSI+ICAgICAgICAgICAgPHBvbHlnb24gaWQ9InBhdGgzNDYiIG9wYWNpdHk9IjAuNSIgcG9pbnRzPSIwIDAgMTk2IDAgMTk2IDE5NiAwIDE5NiI+PC9wb2x5Z29uPiAgICAgICAgICAgIDxwYXRoIGQ9Ik03My41LDE3MS41IEw0Mi44NzUsMTcxLjUgQzMwLjYyNSwxNzEuNSAyNC41LDE2NS4zNzUgMjQuNSwxNTMuMTI1IEwyNC41LDQyLjg3NSBDMjQuNSwzMC42MjUgMzAuNjI1LDI0LjUgNDIuODc1LDI0LjUgTDE1My4xMjUsMjQuNSBDMTcxLjUsMjQuNSAxNzEuNSw0Mi40ODA1NSAxNzEuNSw0Mi44NzUgTDE3MS41LDczLjUgTDE1OS4yNSw3My41IEwxNTkuMjUsMzYuNzUgTDM2Ljc1LDM2Ljc1IEwzNi43NSwxNTkuMjUgTDczLjUsMTU5LjI1IEw3My41LDE3MS41IFogTTE4My43NSwxMTAuMjUgTDE0NywxMzQuNzUgTDE4My43NSwxNzEuNSBMMTcxLjUsMTgzLjc1IEwxMzQuNzUsMTQ3IEwxMTAuMjUsMTgzLjc1IEw4NS43NSw4NS43NSBMMTgzLjc1LDExMC4yNSBaIiBpZD0icGF0aDM0OCIgZmlsbD0iIzAwMDAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+ICAgICAgICA8L2c+ICAgIDwvZz48L3N2Zz4=)",backgroundSize:"12px 12px"},E={backgroundImage:"url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTVweCIgaGVpZ2h0PSIxNnB4IiB2aWV3Qm94PSIwIDAgMTUgMTYiIHZlcnNpb249IjEuMSI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjIgKDY3MTQ1KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5waG9uZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJwaG9uZSIgZmlsbD0iIzAwMDAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgPHBhdGggZD0iTTMsMSBMMyw1LjAwMDEgTDMsNi4wMDAyIEw2LjM0MzQsNi41MzEzNSBMNi4zMjc4LDE0LjU3ODE1IEw1LDE0Ljk5OTk4IEM1LjAwNiwxNS41OTI3NiA1LjQzOTMxLDE2LjAxMTM4IDYsMTUuOTk5OTggTDE0LDE1Ljk5OTk4IEMxNC41Nzg5NiwxNi4wMDE5OCAxNC45ODE3NywxNS41NzI5IDE1LDE0Ljk5OTk4IEwxNSwwLjk5OTk4IEMxNC45ODk4LDAuNDY1MjEgMTQuNTE4MjMsMC4wMDI1OSAxNCwtMmUtMDUgTDQsLTJlLTA1IEMzLjQ2NzAzLDAuMDA3OTggMy4wMDI4NCwwLjQ1Njc1IDMsMC45OTk5OCBMMywxIFogTTMuOTk5OTUsMSBMMTQsMSBMMTQsMTUgTDYsMTUgTDYuNzE4NDUsMTQuNTc4MjEgTDYuODEyMTUsNi4xNTY0MSBMMy45OTk5NSw2LjAwMDMxIEwzLjk5OTk1LDUuMDAwMzggTDMuOTk5OTUsMSBaIiBpZD0icGF0aDM4MiIvPgogICAgICAgICAgICA8cGF0aCBkPSJNMCw2IEwwLDE1IEMwLjAwNiwxNS41OTI3OCAwLjQzOTMxLDE2LjAxMTQgMSwxNiBMNiwxNiBDNi41Nzg5NiwxNi4wMDIgNi45ODE3NywxNS41NzI5MiA3LDE1IEw3LDYgQzYuOTg5OCw1LjQ2NTIzIDYuNTE4MjMsNS4wMDI2MSA2LDUgTDEsNSBDMC40NjcwMyw1LjAwOCAwLjAwMjg0LDUuNDU2NzcgMCw2IFogTTEsNy4wMDAyIEw2LDcuMDAwMiBMNiwxNC4wMDAyIEwxLDE0LjAwMDIgTDEsNy4wMDAyIFoiIGlkPSJwYXRoMzg0Ii8+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=)",backgroundSize:"14px 14px"},R=function(e){Object(p.a)(n,e);var t=D(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).viewportMetadata=void 0,i.handleBack=i.handleBack.bind(Object(d.a)(i)),i.handleForward=i.handleForward.bind(Object(d.a)(i)),i.handleRefresh=i.handleRefresh.bind(Object(d.a)(i)),i.handleUrlChange=i.handleUrlChange.bind(Object(d.a)(i)),i.handleInspect=i.handleInspect.bind(Object(d.a)(i)),i.handleEmulateDevice=i.handleEmulateDevice.bind(Object(d.a)(i)),i.handleDeviceChange=i.handleDeviceChange.bind(Object(d.a)(i)),i.handleViewportSizeChange=i.handleViewportSizeChange.bind(Object(d.a)(i)),i}return Object(h.a)(n,[{key:"render",value:function(){return this.viewportMetadata=this.props.viewport,a.createElement("div",{className:"toolbar"},a.createElement("div",{className:"inner"},a.createElement("button",{className:"inspect "+(this.props.isInspectEnabled?"active":""),style:O,onClick:this.handleInspect},"Inspect"),a.createElement("button",{className:"device "+(this.props.isDeviceEmulationEnabled?"active":""),style:E,onClick:this.handleEmulateDevice},"Emulate device"),a.createElement("button",{className:"backward",style:x,onClick:this.handleBack,disabled:this.props.canGoBack},"Backward"),a.createElement("button",{className:"forward",style:N,onClick:this.handleForward,disabled:this.props.canGoForward},"Forward"),a.createElement("button",{className:"refresh",style:S,onClick:this.handleRefresh},"Refresh"),a.createElement(I,{url:this.props.url,onUrlChanged:this.handleUrlChange,onActionInvoked:this.props.onActionInvoked})),a.createElement(j,{viewportMetadata:this.viewportMetadata,isVisible:this.props.isDeviceEmulationEnabled,onDeviceChange:this.handleDeviceChange,onViewportSizeChange:this.handleViewportSizeChange}))}},{key:"handleUrlChange",value:function(e){this.props.onActionInvoked("urlChange",{url:e})}},{key:"handleBack",value:function(){this.props.onActionInvoked("backward",{})}},{key:"handleForward",value:function(){this.props.onActionInvoked("forward",{})}},{key:"handleRefresh",value:function(){this.props.onActionInvoked("refresh",{})}},{key:"handleInspect",value:function(){this.props.onActionInvoked("inspect",{})}},{key:"handleEmulateDevice",value:function(){this.props.onActionInvoked("emulateDevice",{})}},{key:"handleViewportSizeChange",value:function(e){this.props.onActionInvoked("viewportSizeChange",{height:e.height,width:e.width})}},{key:"handleDeviceChange",value:function(e){this.props.onActionInvoked("viewportDeviceChange",{device:e})}}]),n}(a.Component);n(31),n(32);function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}var T=function(e){Object(p.a)(n,e);var t=A(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(h.a)(n,[{key:"render",value:function(){return a.createElement("div",{className:"loading-bar"},a.createElement("div",{className:"bar",style:this.getBarStyle()},a.createElement("div",{className:"peg"})))}},{key:"getBarStyle",value:function(){var e=this.props.percent;return{display:e>0?"block":"none",width:"".concat(100*e,"%")}}}]),n}(a.Component),z=n(15);n(33);function L(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}var P=function(e){Object(p.a)(n,e);var t=L(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).canvasRef=void 0,i.imageRef=void 0,i.canvasContext=void 0,i.frameId=void 0,i.frame=void 0,i.viewportMetadata=void 0,i.canvasRef=a.createRef(),i.imageRef=a.createRef(),i.canvasContext=null,i.frameId=null,i.frame=e.frame,i.handleMouseEvent=i.handleMouseEvent.bind(Object(d.a)(i)),i.handleKeyEvent=i.handleKeyEvent.bind(Object(d.a)(i)),i.renderLoop=i.renderLoop.bind(Object(d.a)(i)),i.state={imageZoom:1,screenOffsetTop:0},i}return Object(h.a)(n,[{key:"componentDidUpdate",value:function(e,t){t.frame!==this.state.frame&&this.renderScreencastFrame()}},{key:"componentDidMount",value:function(){this.startLoop()}},{key:"componentWillUnmount",value:function(){this.stopLoop()}},{key:"startLoop",value:function(){this.frameId||(this.frameId=window.requestAnimationFrame(this.renderLoop))}},{key:"stopLoop",value:function(){this.frameId&&window.cancelAnimationFrame(this.frameId)}},{key:"renderLoop",value:function(){this.renderFrame(),this.frameId=window.requestAnimationFrame(this.renderLoop)}},{key:"render",value:function(){var e={cursor:this.viewportMetadata?this.viewportMetadata.cursor:"auto"};return a.createElement(a.Fragment,null,a.createElement("img",{ref:this.imageRef,className:"img-hidden"}),a.createElement("canvas",{className:"screencast",style:e,ref:this.canvasRef,onMouseDown:this.handleMouseEvent,onMouseUp:this.handleMouseEvent,onMouseMove:this.handleMouseEvent,onClick:this.handleMouseEvent,onWheel:this.handleMouseEvent,onKeyDown:this.handleKeyEvent,onKeyUp:this.handleKeyEvent,onKeyPress:this.handleKeyEvent,tabIndex:0}))}},{key:"renderFrame",value:function(){if(this.canvasRef.current&&this.imageRef.current){this.viewportMetadata=this.props.viewportMetadata,this.canvasContext=this.canvasRef.current.getContext("2d");var e=this.canvasRef.current,t=this.imageRef.current;if(this.canvasContext){this.canvasContext.imageSmoothingEnabled=!1;var n=this.getCheckerboardPattern(e,this.canvasContext),i=window.devicePixelRatio||1,a=this.props.width,r=this.props.height;e.width=a*i,e.height=r*i,this.canvasContext.scale(i,i),this.canvasContext.save(),this.canvasContext.fillStyle=n,this.canvasContext.fillRect(0,0,a,r),this.canvasContext.restore();var o=this.state.screenOffsetTop*this.viewportMetadata.screenZoom,s=this.props.width,c=this.props.height;if(this.canvasContext.save(),this.canvasContext.drawImage(t,0,o,s,c),this.canvasContext.restore(),this.props.viewportMetadata&&this.props.viewportMetadata.highlightInfo){var u=this.scaleBoxModelToViewport(this.props.viewportMetadata.highlightInfo),l={contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)"};this.canvasContext.save();var h=[];u.content&&h.push({quad:u.content,color:l.contentColor}),u.padding&&h.push({quad:u.padding,color:l.paddingColor}),u.border&&h.push({quad:u.border,color:l.borderColor}),u.margin&&h.push({quad:u.margin,color:l.marginColor});for(var d=h.length-1;d>0;--d)this.canvasContext.save(),this.canvasContext.globalAlpha=.66,this.drawOutlinedQuadWithClip(this.canvasContext,h[d].quad,h[d-1].quad,h[d].color),this.canvasContext.restore();h.length>0&&(this.canvasContext.save(),this.drawOutlinedQuad(this.canvasContext,h[0].quad,h[0].color),this.canvasContext.restore()),this.canvasContext.restore()}}}}},{key:"renderScreencastFrame",value:function(){var e=this.props.frame,t=this.imageRef.current;if(t&&e){var n=e.metadata,i=this.props.format;this.setState({screenOffsetTop:n.offsetTop,scrollOffsetX:n.scrollOffsetX,scrollOffsetY:n.scrollOffsetY}),t.src="data:image/"+i+";base64,"+e.base64Data}}},{key:"getCheckerboardPattern",value:function(e,t){var n=e,i=n.getContext("2d");n.width=64,n.height=64,i&&(i.fillStyle="rgb(195, 195, 195)",i.fillRect(0,0,64,64),i.fillStyle="rgb(225, 225, 225)",i.fillRect(0,0,32,32),i.fillRect(32,32,32,32));var a=t.createPattern(n,"repeat");return a||new CanvasPattern}},{key:"handleMouseEvent",value:function(e){if(this.props.isInspectEnabled){if("click"===e.type){var t=this.convertIntoScreenSpace(e,this.state);this.props.onInspectElement({position:t})}else if("mousemove"===e.type){var n=this.convertIntoScreenSpace(e,this.state);this.props.onInspectHighlightRequested({position:n})}}else this.dispatchMouseEvent(e.nativeEvent);if("mousemove"===e.type){var i=this.convertIntoScreenSpace(e,this.state);this.props.onMouseMoved({position:i})}"mousedown"===e.type&&this.canvasRef.current&&this.canvasRef.current.focus()}},{key:"convertIntoScreenSpace",value:function(e,t){var n=0;return this.canvasRef&&this.canvasRef.current&&(n=this.canvasRef.current.getBoundingClientRect().top),{x:Math.round(e.clientX/this.viewportMetadata.screenZoom+this.state.scrollOffsetX),y:Math.round(e.clientY/this.viewportMetadata.screenZoom-n+this.state.scrollOffsetY)}}},{key:"quadToPath",value:function(e,t){return e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(t[2],t[3]),e.lineTo(t[4],t[5]),e.lineTo(t[6],t[7]),e.closePath(),e}},{key:"drawOutlinedQuad",value:function(e,t,n){e.lineWidth=2,this.quadToPath(e,t).clip(),e.fillStyle=n,e.fill()}},{key:"drawOutlinedQuadWithClip",value:function(e,t,n,i){e.fillStyle=i,e.lineWidth=0,this.quadToPath(e,t).fill(),e.globalCompositeOperation="destination-out",e.fillStyle="red",this.quadToPath(e,n).fill()}},{key:"scaleBoxModelToViewport",value:function(e){var t=this.viewportMetadata.screenZoom,n=this.state.screenOffsetTop;function i(e){for(var i=0;i<e.length;i+=2)e[i]=e[i]*t,e[i+1]=(e[i+1]+n)*t}return i.call(this,e.content),i.call(this,e.padding),i.call(this,e.border),i.call(this,e.margin),e}},{key:"handleKeyEvent",value:function(e){this.emitKeyEvent(e.nativeEvent),"Tab"===e.key&&e.preventDefault(),this.canvasRef.current&&this.canvasRef.current.focus()}},{key:"modifiersForEvent",value:function(e){return(e.altKey?1:0)|(e.ctrlKey?2:0)|(e.metaKey?4:0)|(e.shiftKey?8:0)}},{key:"emitKeyEvent",value:function(e){var t;switch(e.type){case"keydown":t="keyDown";break;case"keyup":t="keyUp";break;case"keypress":t="char";break;default:return}var n="keypress"===e.type?String.fromCharCode(e.charCode):void 0,i={type:t,modifiers:this.modifiersForEvent(e),text:n,unmodifiedText:n?n.toLowerCase():void 0,keyIdentifier:e.keyIdentifier,code:e.code,key:e.key,windowsVirtualKeyCode:e.keyCode,nativeVirtualKeyCode:e.keyCode,autoRepeat:!1,isKeypad:!1,isSystemKey:!1};this.props.onInteraction("Input.dispatchKeyEvent",i)}},{key:"dispatchMouseEvent",value:function(e){var t=0,n={mousedown:"mousePressed",mouseup:"mouseReleased",mousemove:"mouseMoved",wheel:"mouseWheel"};if(e.type in n){var i=Math.round(e.offsetX/this.viewportMetadata.screenZoom),a=Math.round(e.offsetY/this.viewportMetadata.screenZoom),r=n[e.type];"mousePressed"!=r&&"mouseReleased"!=r||(t=1);var o={type:r,x:i,y:a,modifiers:this.modifiersForEvent(e),button:{0:"none",1:"left",2:"middle",3:"right"}[e.which],clickCount:t,deltaX:0,deltaY:0};"mouseWheel"===r&&(o.deltaX=e.deltaX/this.viewportMetadata.screenZoom,o.deltaY=e.deltaY/this.viewportMetadata.screenZoom),this.props.onInteraction("Input.dispatchMouseEvent",o)}}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.frame!==t.frame?{frame:e.frame}:null}}]),n}(a.Component);n(34);function V(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}var U=function(e){Object(p.a)(n,e);var t=V(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).timer=void 0,i.timer=0,i.state={isHidden:!1},i}return Object(h.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.height===this.props.height&&e.width===this.props.width||(this.setState({isHidden:!1}),window.clearTimeout(this.timer))}},{key:"render",value:function(){var e=this,t=Math.round(this.props.height),n=Math.round(this.props.width);return this.timer=window.setTimeout(function(){e.setState({isHidden:!0})},5e3),a.createElement("div",{className:"viewport-info ".concat(this.state.isHidden?"hidden":"")},n,"px \ud835\uddd1 ",t,"px")}}]),n}(a.Component),Z=n(16),H=n.n(Z);function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}var B=function(e){Object(p.a)(n,e);var t=F(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).viewportRef=void 0,i.viewportMetadata=void 0,i.debouncedResizeHandler=void 0,i.viewportPadding=void 0,i.viewportRef=a.createRef(),i.viewportPadding={top:70,left:30,right:30,bottom:30},i.debouncedResizeHandler=H()(i.handleViewportResize.bind(Object(d.a)(i)),50),i.handleInspectElement=i.handleInspectElement.bind(Object(d.a)(i)),i.handleInspectHighlightRequested=i.handleInspectHighlightRequested.bind(Object(d.a)(i)),i.handleScreencastInteraction=i.handleScreencastInteraction.bind(Object(d.a)(i)),i.handleResizeStop=i.handleResizeStop.bind(Object(d.a)(i)),i.handleMouseMoved=i.handleMouseMoved.bind(Object(d.a)(i)),i}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.debouncedResizeHandler(),window.addEventListener("resize",this.debouncedResizeHandler)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.debouncedResizeHandler)}},{key:"render",value:function(){this.viewportMetadata=this.props.viewport;var e=this.viewportMetadata.width*this.viewportMetadata.screenZoom,t=this.viewportMetadata.height*this.viewportMetadata.screenZoom,n={top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1};this.viewportMetadata.isResizable&&(n={top:!0,topRight:!0,topLeft:!0,bottom:!0,bottomRight:!0,bottomLeft:!0,left:!0,right:!0});var i=a.createElement(P,{height:t,width:e,frame:this.props.frame,format:this.props.format,viewportMetadata:this.viewportMetadata,isInspectEnabled:this.props.isInspectEnabled,onInspectElement:this.handleInspectElement,onInspectHighlightRequested:this.handleInspectHighlightRequested,onInteraction:this.handleScreencastInteraction,onMouseMoved:this.handleMouseMoved});return a.createElement("div",{className:"viewport "+(this.props.isDeviceEmulationEnabled?"viewport-resizable":""),ref:this.viewportRef},a.createElement(T,{percent:this.viewportMetadata.loadingPercent}),a.createElement(U,{height:this.viewportMetadata.height,width:this.viewportMetadata.width}),a.createElement(z.a,{className:"viewport-resizable-wrap",size:{width:e,height:t},onResizeStop:this.handleResizeStop,enable:n,handleClasses:{bottom:"viewport-resizer resizer-bottom",bottomRight:"viewport-resizer resizer-bottom-right",bottomLeft:"viewport-resizer resizer-bottom-left",left:"viewport-resizer resizer-left",right:"viewport-resizer resizer-right",top:"viewport-resizer resizer-top",topRight:"viewport-resizer resizer-top-right",topLeft:"viewport-resizer resizer-top-left"}},i))}},{key:"calculateViewport",value:function(){console.log("viewport.calculateViewport"),this.calculateViewportSize(),this.calculateViewportZoom()}},{key:"calculateViewportZoom",value:function(){var e=1;if(!this.viewportMetadata.isFixedZoom){if(this.viewportMetadata.isFixedSize){var t={height:window.innerHeight-38,width:window.innerWidth};this.props.isDeviceEmulationEnabled&&(t.width=t.width-this.viewportPadding.left-this.viewportPadding.right,t.height=t.height-this.viewportPadding.bottom-this.viewportPadding.top),e=Math.min(t.width/this.viewportMetadata.width,t.height/this.viewportMetadata.height)}e!==this.viewportMetadata.screenZoom&&(console.log("viewport.calculateViewportZoom.emitChange"),this.emitViewportChanges({screenZoom:e}))}}},{key:"calculateViewportSize",value:function(){if(!this.viewportMetadata.isFixedSize&&this.viewportRef.current){var e=this.viewportRef.current.getBoundingClientRect(),t=e.width,n=e.height;if(this.props.isDeviceEmulationEnabled&&(t=t-this.viewportPadding.left-this.viewportPadding.right,n=n-this.viewportPadding.bottom-this.viewportPadding.top),n=this.roundNumber(n),(t=this.roundNumber(t))===this.roundNumber(this.viewportMetadata.width)&&n===this.roundNumber(this.viewportMetadata.height))return;console.log("viewport.calculateViewportSize.emitChange"),this.emitViewportChanges({width:t,height:n})}}},{key:"handleViewportResize",value:function(){console.log("viewport.handleViewportResize"),this.calculateViewport()}},{key:"handleResizeStop",value:function(e,t,n,i){this.emitViewportChanges({width:this.viewportMetadata.width+i.width,height:this.viewportMetadata.height+i.height,isFixedSize:!0})}},{key:"handleInspectElement",value:function(e){this.props.onViewportChanged("inspectElement",{params:e})}},{key:"handleInspectHighlightRequested",value:function(e){this.props.onViewportChanged("inspectHighlightRequested",{params:e})}},{key:"handleScreencastInteraction",value:function(e,t){this.props.onViewportChanged("interaction",{action:e,params:t})}},{key:"handleMouseMoved",value:function(e){this.props.onViewportChanged("hoverElementChanged",{params:e})}},{key:"roundNumber",value:function(e){return Math.floor(e)}},{key:"emitViewportChanges",value:function(e){this.props.onViewportChanged("size",e)}}]),n}(a.Component),G=function(){function e(){Object(l.a)(this,e),this.enabled=!0}return Object(h.a)(e,[{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"log",value:function(){var e;this.enabled&&(e=console).log.apply(e,arguments)}}]),e}();function W(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}var Y=function(e){Object(p.a)(n,e);var t=W(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).lastId=void 0,e.vscode=void 0,e.callbacks=void 0,e.logger=void 0,e.lastId=0,e.callbacks=new Map,e.logger=new G,window.addEventListener("message",function(t){e.onMessage(t)}),e}return Object(h.a)(n,[{key:"send",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=++this.lastId;if(this.logger.log("SEND \u25ba ",e,n),!this.vscode)try{this.vscode=acquireVsCodeApi()}catch(a){this.vscode=null}return this.vscode&&this.vscode.postMessage({callbackId:i,params:n,type:e}),new Promise(function(n,a){t.callbacks.set(i,{resolve:n,reject:a,error:new Error,method:e})})}},{key:"onMessage",value:function(e){var t=e.data;if(t)if(t.callbackId){this.logger.log("\u25c0 RECV callbackId: ".concat(t.callbackId));var n=this.callbacks.get(t.callbackId);n&&(this.callbacks.delete(t.callbackId),t.error?n.reject(t.error,n.method,t):n.resolve(t.result))}else this.logger.log("\u25c0 RECV method: ".concat(t.method)),this.emit(t.method,t.result)}},{key:"enableVerboseLogging",value:function(e){e?this.logger.enable():this.logger.disable()}}]),n}(n(44).EventEmitter2),q=n(17);function Q(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var X=function(){function e(t){Object(l.a)(this,e),this.connection=void 0,this.connection=t}return Object(h.a)(e,[{key:"resolveElementProperties",value:function(){var e=Object(c.a)(s.a.mark(function e(t,n){var i,a,r,o=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProperties(t);case 2:return i=e.sent,a=function(){var e=Object(c.a)(s.a.mark(function e(t,i){var r,c,u,l,h,d,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={},c=0|i,u=Q(t),e.prev=3,u.s();case 5:if((l=u.n()).done){e.next=32;break}if(h=l.value,d=null,!h.value){e.next=29;break}if("object"!=h.value.type){e.next=28;break}if(!h.value.objectId){e.next=25;break}if(!(c<n)){e.next=22;break}return e.next=14,o.getProperties(h.value.objectId);case 14:if(d=e.sent,!Array.isArray(d)){e.next=20;break}return p=c+1,e.next=19,a(d,p);case 19:d=e.sent;case 20:e.next=23;break;case 22:d="<max depth reached>";case 23:e.next=26;break;case 25:h.value.value&&(d=h.value.value);case 26:e.next=29;break;case 28:"function"==h.value.type?d="function":"string"==h.value.type?d=h.value.value:"number"==h.value.type&&(d=h.value.value);case 29:Object.defineProperty(r,h.name,{value:d,enumerable:h.enumerable,configurable:h.configurable,writable:h.writable});case 30:e.next=5;break;case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(3),u.e(e.t0);case 37:return e.prev=37,u.f(),e.finish(37);case 40:return e.abrupt("return",r);case 41:case"end":return e.stop()}},e,null,[[3,34,37,40]])}));return function(t,n){return e.apply(this,arguments)}}(),e.next=6,a(i,0);case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getProperties",value:function(){var e=Object(c.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.send("Runtime.getProperties",{objectId:t,ownProperties:!0});case 2:return n=e.sent,e.abrupt("return",n.result);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getCursorForNode",value:function(){var e=Object(c.a)(s.a.mark(function e(t){var n,i,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.nodeId,t.nodeId||(n=this.getNodeIdFromBackendId(t.backendNodeId)),n){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.connection.send("CSS.getComputedStyleForNode",{nodeId:n});case 6:return i=e.sent,a=i.computedStyle.find(function(e){return"cursor"==e.name}),e.abrupt("return",a.value);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getNodeIdFromBackendId",value:function(){var e=Object(c.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.send("DOM.getDocument");case 2:return e.next=4,this.connection.send("DOM.pushNodesByBackendIdsToFrontend",{backendNodeIds:[t]});case 4:if(!(n=e.sent)){e.next=7;break}return e.abrupt("return",n.nodeIds[0]);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();function J(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}var $=function(e){Object(p.a)(n,e);var t=J(n);function n(e){var i;return Object(l.a)(this,n),(i=t.call(this,e)).connection=void 0,i.viewport=void 0,i.cdpHelper=void 0,i.state={frame:null,format:"jpeg",url:"about:blank",isVerboseMode:!1,isInspectEnabled:!1,isDeviceEmulationEnabled:!1,history:{canGoBack:!1,canGoForward:!1},viewportMetadata:{cursor:null,deviceSizeRatio:1,height:null,width:null,highlightNode:null,highlightInfo:null,emulatedDeviceId:"Responsive",isLoading:!1,isFixedSize:!1,isFixedZoom:!1,isResizable:!0,loadingPercent:0,screenZoom:1,scrollOffsetX:0,scrollOffsetY:0}},i.connection=new Y,i.onToolbarActionInvoked=i.onToolbarActionInvoked.bind(Object(d.a)(i)),i.onViewportChanged=i.onViewportChanged.bind(Object(d.a)(i)),i.connection.enableVerboseLogging(i.state.isVerboseMode),i.connection.on("Page.navigatedWithinDocument",function(e){i.requestNavigationHistory()}),i.connection.on("Page.frameNavigated",function(e){!e.frame.parentId&&(i.requestNavigationHistory(),i.updateState(Object(u.a)({},i.state,{viewportMetadata:Object(u.a)({},i.state.viewportMetadata,{isLoading:!0,loadingPercent:.1})})))}),i.connection.on("Page.loadEventFired",function(e){i.updateState(Object(u.a)({},i.state,{viewportMetadata:Object(u.a)({},i.state.viewportMetadata,{loadingPercent:1})})),setTimeout(function(){i.updateState(Object(u.a)({},i.state,{viewportMetadata:Object(u.a)({},i.state.viewportMetadata,{isLoading:!1,loadingPercent:0})}))},500)}),i.connection.on("Page.screencastFrame",function(e){i.handleScreencastFrame(e)}),i.connection.on("Page.windowOpen",function(e){i.connection.send("extension.windowOpenRequested",{url:e.url})}),i.connection.on("Page.javascriptDialogOpening",function(e){var t=e.url,n=e.message,a=e.type;i.connection.send("extension.windowDialogRequested",{url:t,message:n,type:a})}),i.connection.on("Page.frameResized",function(e){i.stopCasting(),i.startCasting()}),i.connection.on("Overlay.nodeHighlightRequested",function(e){console.log("nodeHighlightRequested",e)}),i.connection.on("Overlay.inspectNodeRequested",function(e){console.log("inspectNodeRequested",e)}),i.connection.on("extension.appConfiguration",function(e){e&&(i.updateState({isVerboseMode:!!e.isVerboseMode&&e.isVerboseMode,url:e.startUrl?e.startUrl:"about:blank",format:e.format?e.format:"jpeg"}),e.startUrl&&i.connection.send("Page.navigate",{url:e.startUrl}))}),i.connection.on("extension.viewport",function(e){i.handleViewportSizeChange(e),i.enableViewportDeviceEmulation("Live Share")}),i.connection.send("Page.enable"),i.connection.send("DOM.enable"),i.connection.send("CSS.enable"),i.connection.send("Overlay.enable"),i.requestNavigationHistory(),i.startCasting(),i.cdpHelper=new X(i.connection),i}return Object(h.a)(n,[{key:"handleScreencastFrame",value:function(e){var t=e.sessionId,n=e.data,i=e.metadata;this.connection.send("Page.screencastFrameAck",{sessionId:t}),this.requestNodeHighlighting(),this.updateState(Object(u.a)({},this.state,{frame:{base64Data:n,metadata:i},viewportMetadata:Object(u.a)({},this.state.viewportMetadata,{scrollOffsetX:i.scrollOffsetX,scrollOffsetY:i.scrollOffsetY})}))}},{key:"componentDidUpdate",value:function(){var e=this.state.isVerboseMode;this.connection.enableVerboseLogging(e)}},{key:"sendStatetoHost",value:function(){this.connection.send("extension.appStateChanged",{state:this.state})}},{key:"render",value:function(){var e=this;return a.createElement("div",{className:"App"},a.createElement(R,{url:this.state.url,viewport:this.state.viewportMetadata,onActionInvoked:this.onToolbarActionInvoked,canGoBack:this.state.history.canGoBack,canGoForward:this.state.history.canGoForward,isInspectEnabled:this.state.isInspectEnabled,isDeviceEmulationEnabled:this.state.isDeviceEmulationEnabled}),a.createElement(B,{viewport:this.state.viewportMetadata,isInspectEnabled:this.state.isInspectEnabled,isDeviceEmulationEnabled:this.state.isDeviceEmulationEnabled,frame:this.state.frame,format:this.state.format,url:this.state.url,onViewportChanged:this.onViewportChanged,ref:function(t){e.viewport=t}}))}},{key:"stopCasting",value:function(){this.connection.send("Page.stopScreencast")}},{key:"startCasting",value:function(){var e={quality:80,format:this.state.format,maxWidth:2e3,maxHeight:2e3};this.state.viewportMetadata.width&&(e.maxWidth=Math.floor(this.state.viewportMetadata.width*window.devicePixelRatio)),this.state.viewportMetadata.height&&(e.maxHeight=Math.floor(this.state.viewportMetadata.height*window.devicePixelRatio)),this.connection.send("Page.startScreencast",e)}},{key:"requestNavigationHistory",value:function(){var e=Object(c.a)(s.a.mark(function e(){var t,n,i,a,r,o,c,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.send("Page.getNavigationHistory");case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:n=t.currentIndex,i=t.entries,a=i[n],r=a.url,o=/^http:\/\/(.+)/,(c=r.match(o))&&(r=c[1]),this.updateState(Object(u.a)({},this.state,{url:r,history:{canGoBack:0===n,canGoForward:n===i.length-1}})),l=a.title||a.url,this.connection.send("extension.updateTitle",{title:"Browser Preview (".concat(l,")")});case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onViewportChanged",value:function(){var e=Object(c.a)(s.a.mark(function e(t,n){var i,a,r,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="inspectHighlightRequested"===e.t0?3:"inspectElement"===e.t0?5:"hoverElementChanged"===e.t0?9:"interaction"===e.t0?12:"size"===e.t0?14:26;break;case 3:return this.handleInspectHighlightRequested(n),e.abrupt("break",26);case 5:return e.next=7,this.handleInspectElementRequest(n);case 7:return this.handleToggleInspect(),e.abrupt("break",26);case 9:return e.next=11,this.handleElementChanged(n);case 11:return e.abrupt("break",26);case 12:return this.connection.send(n.action,n.params),e.abrupt("break",26);case 14:return console.log("app.onViewportChanged.size",n),i={},void 0!==n.height&&void 0!==n.width&&(a=Math.floor(n.height),r=Math.floor(n.width),o=window.devicePixelRatio||1,this.connection.send("Page.setDeviceMetricsOverride",{deviceScaleFactor:o,mobile:!1,height:a,width:r}),i.height=a,i.width=r),void 0!==n.isResizable&&(i.isResizable=n.isResizable),void 0!==n.isFixedSize&&(i.isFixedSize=n.isFixedSize),void 0!==n.isFixedZoom&&(i.isFixedZoom=n.isFixedZoom),void 0!==n.emulatedDeviceId&&(i.emulatedDeviceId=n.emulatedDeviceId),void 0!==n.screenZoom&&(i.screenZoom=n.screenZoom),e.next=24,this.updateState(Object(u.a)({},this.state,{viewportMetadata:Object(u.a)({},this.state.viewportMetadata,i)}));case 24:return this.viewport.calculateViewport(),e.abrupt("break",26);case 26:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateState",value:function(){var e=Object(c.a)(s.a.mark(function e(t){var n=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,i){n.setState(t,function(){n.sendStatetoHost(),e()})}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleInspectHighlightRequested",value:function(){var e=Object(c.a)(s.a.mark(function e(t){var n,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.send("DOM.getNodeForLocation",{x:t.params.position.x,y:t.params.position.y});case 2:if(!(n=e.sent)){e.next=11;break}if(i=n.nodeId,n.nodeId||!n.backendNodeId){e.next=9;break}return e.next=8,this.cdpHelper.getNodeIdFromBackendId(n.backendNodeId);case 8:i=e.sent;case 9:this.setState(Object(u.a)({},this.state,{viewportMetadata:Object(u.a)({},this.state.viewportMetadata,{highlightNode:{nodeId:i,sourceMetadata:null}})})),this.requestNodeHighlighting();case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"resolveHighlightNodeSourceMetadata",value:function(){var e=Object(c.a)(s.a.mark(function e(){var t,n,i,a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.viewportMetadata.highlightNode){e.next=2;break}return e.abrupt("return");case 2:return t=this.state.viewportMetadata.highlightNode.nodeId,e.next=5,this.connection.send("DOM.resolveNode",{nodeId:t});case 5:if(!(n=e.sent).object){e.next=16;break}return i=n.object.objectId,e.next=10,this.cdpHelper.resolveElementProperties(i,3);case 10:if(!(a=e.sent)){e.next=16;break}if((r=Object(q.a)(a)).fileName){e.next=15;break}return e.abrupt("return");case 15:this.setState(Object(u.a)({},this.state,{viewportMetadata:Object(u.a)({},this.state.viewportMetadata,{highlightNode:Object(u.a)({},this.state.viewportMetadata.highlightNode,{sourceMetadata:{fileName:r.fileName,columnNumber:r.columnNumber,lineNumber:r.lineNumber,charNumber:r.charNumber}})})}));case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleInspectElementRequest",value:function(){var e=Object(c.a)(s.a.mark(function e(t){var n,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.viewportMetadata.highlightNode){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.resolveHighlightNodeSourceMetadata();case 4:n=this.state.viewportMetadata.highlightNode.nodeId,this.connection.send("Overlay.inspectNodeRequested",{nodeId:n}),(i=this.state.viewportMetadata.highlightNode.sourceMetadata)&&this.connection.send("extension.openFile",{fileName:i.fileName,lineNumber:i.lineNumber,columnNumber:i.columnNumber,charNumber:i.charNumber});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onToolbarActionInvoked",value:function(e,t){switch(e){case"forward":this.connection.send("Page.goForward");break;case"backward":this.connection.send("Page.goBackward");break;case"refresh":this.connection.send("Page.reload");break;case"inspect":this.handleToggleInspect();break;case"emulateDevice":this.handleToggleDeviceEmulation();break;case"urlChange":this.handleUrlChange(t);break;case"readClipboard":return this.connection.send("Clipboard.readText");case"writeClipboard":this.handleClipboardWrite(t);break;case"viewportSizeChange":this.handleViewportSizeChange(t);break;case"viewportDeviceChange":this.handleViewportDeviceChange(t)}return Promise.resolve()}},{key:"handleToggleInspect",value:function(){this.state.isInspectEnabled?(this.connection.send("Overlay.hideHighlight"),this.updateState({isInspectEnabled:!1,viewportMetadata:Object(u.a)({},this.state.viewportMetadata,{highlightInfo:null,highlightNode:null})})):this.updateState({isInspectEnabled:!0})}},{key:"handleUrlChange",value:function(e){this.connection.send("Page.navigate",{url:e.url}),this.updateState(Object(u.a)({},this.state,{url:e.url}))}},{key:"handleViewportSizeChange",value:function(e){this.onViewportChanged("size",{width:e.width,height:e.height})}},{key:"handleViewportDeviceChange",value:function(e){var t="Responsive"===e.device.name,n="Responsive"!==e.device.name,i="Responsive"===e.device.name,a=e.device.viewport?e.device.viewport.width:void 0,r=e.device.viewport?e.device.viewport.height:void 0;this.onViewportChanged("size",{emulatedDeviceId:e.device.name,height:r,isResizable:t,isFixedSize:n,isFixedZoom:i,screenZoom:1,width:a})}},{key:"handleToggleDeviceEmulation",value:function(){this.state.isDeviceEmulationEnabled?this.disableViewportDeviceEmulation():this.enableViewportDeviceEmulation()}},{key:"disableViewportDeviceEmulation",value:function(){console.log("app.disableViewportDeviceEmulation"),this.handleViewportDeviceChange({device:{name:"Responsive",viewport:{width:this.state.viewportMetadata.width,height:this.state.viewportMetadata.height}}}),this.updateState({isDeviceEmulationEnabled:!1})}},{key:"enableViewportDeviceEmulation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Responsive";console.log("app.enableViewportDeviceEmulation"),this.handleViewportDeviceChange({device:{name:e,viewport:{width:this.state.viewportMetadata.width,height:this.state.viewportMetadata.height}}}),this.updateState({isDeviceEmulationEnabled:!0})}},{key:"handleClipboardWrite",value:function(e){if(e&&e.value)return this.connection.send("Clipboard.writeText",e)}},{key:"handleElementChanged",value:function(){var e=Object(c.a)(s.a.mark(function e(t){var n,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.send("DOM.getNodeForLocation",{x:t.params.position.x,y:t.params.position.y});case 2:return n=e.sent,e.next=5,this.cdpHelper.getCursorForNode(n);case 5:i=e.sent,this.setState(Object(u.a)({},this.state,{viewportMetadata:Object(u.a)({},this.state.viewportMetadata,{cursor:i})}));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"requestNodeHighlighting",value:function(){var e=Object(c.a)(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.viewportMetadata.highlightNode){e.next=8;break}return t=this.state.viewportMetadata.highlightNode.nodeId,e.next=4,this.connection.send("DOM.getBoxModel",{nodeId:t});case 4:return n=e.sent,e.next=7,this.connection.send("Overlay.highlightNode",{nodeId:t,highlightConfig:{showInfo:!0,showStyles:!0,showRulers:!0,showExtensionLines:!0}});case 7:n&&n.model&&this.setState(Object(u.a)({},this.state,{viewportMetadata:Object(u.a)({},this.state.viewportMetadata,{highlightInfo:n.model})}));case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),n}(a.Component);n(46);r.render(a.createElement($,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.c3957137.chunk.js.map